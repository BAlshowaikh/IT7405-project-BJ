{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}CoHub{% endblock %}</title>

    <!-- Tailwind via CDN (same as your auth pages, or move to static later) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Iconify web component (needed for <iconify-icon>) -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
  </head>
  <body class="min-h-screen bg-slate-50 text-slate-900">
    <div class="flex min-h-screen">
      {# Sidebar #}
      {% include "partials/_sidebar.html" %}

      {# Main content area #}
      <main class="flex-1 bg-slate-50">
        <header class="h-16 border-b flex items-center justify-end px-8 bg-[#20222F]">
          {# Placeholder top-right avatar, etc. #}
          <div class="h-9 w-9 rounded-full bg-slate-200 flex items-center justify-center">
            <iconify-icon icon="solar:user-circle-line-duotone" class="text-xl text-slate-500"></iconify-icon>
          </div>
        </header>

        <section class="p-8">
          {% block content %}
          {% endblock %}
        </section>

        <!-- Global toast notification -->
        <div
          id="global-toast-overlay"
          class="fixed inset-0 flex items-center justify-center z-50 bg-slate-900/40 transition-opacity duration-300"
          style="display: none; opacity: 0;"
        >
          <div
            id="global-toast"
            class="bg-slate-900 text-white px-6 py-3 rounded-2xl shadow-xl flex items-center gap-3"
          >
            <span
              class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-emerald-500/15 text-emerald-400"
            >
              <iconify-icon icon="mdi:check" class="text-xl"></iconify-icon>
            </span>
            <p id="global-toast-message" class="text-sm font-semibold"></p>
          </div>
        </div>

        <script>
          // Simple global toast: window.showToast("message")
          window.showToast = function (message) {
            const overlay = document.getElementById("global-toast-overlay");
            const msgEl = document.getElementById("global-toast-message");
            if (!overlay || !msgEl) return;

            msgEl.textContent = message || "";

            // show: make it flex + fade in
            overlay.style.display = "flex";
            // force a repaint so transition runs
            requestAnimationFrame(() => {
              overlay.style.opacity = "1";
            });

            // hide after 5s
            if (window.__toastTimer) {
              clearTimeout(window.__toastTimer);
            }

            window.__toastTimer = setTimeout(() => {
              overlay.style.opacity = "0";
              setTimeout(() => {
                overlay.style.display = "none";
              }, 300); // 
            }, 3000);
          };
        </script>


      </main>
    </div>
    {% block extra_scripts %}{% endblock %}
  </body>
</html>


